<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Part 2 - Confidence Intervals | S1Y Lab 4</title>
  <meta name="description" content="Part 2 - Confidence Intervals | S1Y Lab 4" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Part 2 - Confidence Intervals | S1Y Lab 4" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Part 2 - Confidence Intervals | S1Y Lab 4" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="part-1---sampling-distributions.html"/>
<link rel="next" href="group-tasks.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to Lab 4</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#intended-learning-outcomes"><i class="fa fa-check"></i>Intended Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#credit-where-credit-is-due"><i class="fa fa-check"></i>Credit where credit is due</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="part-1---sampling-distributions.html"><a href="part-1---sampling-distributions.html"><i class="fa fa-check"></i>Part 1 - Sampling Distributions</a>
<ul>
<li class="chapter" data-level="" data-path="part-1---sampling-distributions.html"><a href="part-1---sampling-distributions.html#data"><i class="fa fa-check"></i>Data</a></li>
<li class="chapter" data-level="" data-path="part-1---sampling-distributions.html"><a href="part-1---sampling-distributions.html#unknown-sampling-distribution"><i class="fa fa-check"></i>Unknown Sampling Distribution</a>
<ul>
<li class="chapter" data-level="" data-path="part-1---sampling-distributions.html"><a href="part-1---sampling-distributions.html#exercise-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="part-1---sampling-distributions.html"><a href="part-1---sampling-distributions.html#exercise-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="part-1---sampling-distributions.html"><a href="part-1---sampling-distributions.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="part-1---sampling-distributions.html"><a href="part-1---sampling-distributions.html#exercise-4"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="part-1---sampling-distributions.html"><a href="part-1---sampling-distributions.html#sample-size-and-sampling-distribution"><i class="fa fa-check"></i>Sample Size and Sampling Distribution</a></li>
<li class="chapter" data-level="" data-path="part-1---sampling-distributions.html"><a href="part-1---sampling-distributions.html#effect-of-sample-size-on-sampling-distribution"><i class="fa fa-check"></i>Effect of Sample Size on Sampling Distribution</a>
<ul>
<li class="chapter" data-level="" data-path="part-1---sampling-distributions.html"><a href="part-1---sampling-distributions.html#exercise-5"><i class="fa fa-check"></i>Exercise 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="part-2---confidence-intervals.html"><a href="part-2---confidence-intervals.html"><i class="fa fa-check"></i>Part 2 - Confidence Intervals</a>
<ul>
<li class="chapter" data-level="" data-path="part-2---confidence-intervals.html"><a href="part-2---confidence-intervals.html#data-1"><i class="fa fa-check"></i>Data</a>
<ul>
<li class="chapter" data-level="" data-path="part-2---confidence-intervals.html"><a href="part-2---confidence-intervals.html#exercise-6"><i class="fa fa-check"></i>Exercise 6</a></li>
<li class="chapter" data-level="" data-path="part-2---confidence-intervals.html"><a href="part-2---confidence-intervals.html#exercise-7"><i class="fa fa-check"></i>Exercise 7</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="part-2---confidence-intervals.html"><a href="part-2---confidence-intervals.html#computing-confidence-intervals"><i class="fa fa-check"></i>Computing Confidence Intervals</a></li>
<li class="chapter" data-level="" data-path="part-2---confidence-intervals.html"><a href="part-2---confidence-intervals.html#confidence-levels"><i class="fa fa-check"></i>Confidence Levels</a>
<ul>
<li class="chapter" data-level="" data-path="part-2---confidence-intervals.html"><a href="part-2---confidence-intervals.html#exercise-8"><i class="fa fa-check"></i>Exercise 8</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="group-tasks.html"><a href="group-tasks.html"><i class="fa fa-check"></i>Group Tasks</a>
<ul>
<li class="chapter" data-level="" data-path="group-tasks.html"><a href="group-tasks.html#sampling-distributions"><i class="fa fa-check"></i>Sampling Distributions</a>
<ul>
<li class="chapter" data-level="" data-path="group-tasks.html"><a href="group-tasks.html#task-1"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="group-tasks.html"><a href="group-tasks.html#task-2"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="group-tasks.html"><a href="group-tasks.html#task-3"><i class="fa fa-check"></i>Task 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="group-tasks.html"><a href="group-tasks.html#confidence-intervals"><i class="fa fa-check"></i>Confidence Intervals</a>
<ul>
<li class="chapter" data-level="" data-path="group-tasks.html"><a href="group-tasks.html#task-4"><i class="fa fa-check"></i>Task 4</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">S1Y Lab 4</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="part-2---confidence-intervals" class="section level1 unnumbered hasAnchor">
<h1>Part 2 - Confidence Intervals<a href="part-2---confidence-intervals.html#part-2---confidence-intervals" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="data-1" class="section level2 unnumbered hasAnchor">
<h2>Data<a href="part-2---confidence-intervals.html#data-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="images/climate-change.jpg" width="24%" style="float:right; padding:10px" style="display: block; margin: auto;" /></p>
<p>A 2019 Pew Research report states the following:</p>
<blockquote>
<p>Roughly six-in-ten U.S. adults (62%) say climate change is currently affecting their local community either a great deal or some, according to a new Pew Research Center survey.</p>
<p><strong>Source:</strong> <a href="https://www.pewresearch.org/fact-tank/2019/12/02/most-americans-say-climate-change-impacts-their-community-but-effects-vary-by-region/">Most Americans say climate change impacts their community, but effects vary by region</a></p>
</blockquote>
<p>In this part of the lab, we will assume this 62% is a true population proportion and learn about how sample proportions can vary from sample to sample by taking smaller samples from the population. We will first create our population assuming a population size of 100,000 (which is unrealistic, but it keeps the computing time down to a reasonable level for this lab). This means 62,000 (62%) of the adult population think climate change impacts their community, and the remaining 38,000 do not think so.</p>
<p>We used the code below to construct the data frame for this problem. The data frame is constructed as before using the <code>tibble</code> function; refer to start of Lab 3 to understand what the code is doing.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="part-2---confidence-intervals.html#cb21-1" aria-hidden="true" tabindex="-1"></a>us_adults <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb21-2"><a href="part-2---confidence-intervals.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">climate_change_affects =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;Yes&quot;</span>, <span class="dv">62000</span>), <span class="fu">rep</span>(<span class="st">&quot;No&quot;</span>, <span class="dv">38000</span>)))</span></code></pre></div>
<p>The name of the data frame is <code>us_adults</code> and the name of the variable that contains responses to the question <em>"Do you think climate change is affecting your local community?"</em> is <code>climate_change_affects</code>.</p>
<p>Similar to before, run the following code to obtain summary statistics to confirm we constructed the data frame correctly and to visualise the distribution of these responses using a bar plot.</p>
<p><br></p>
<div id="exercise-6" class="section level3 unnumbered hasAnchor">
<h3>Exercise 6<a href="part-2---confidence-intervals.html#exercise-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Using the code seen earlier in the lab, write code to produce summary statistics and produce a plot of the data showing how many people think climate change is affecting their local community and those who do not.</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>Calculate the proportion of people who think climate change is affecting their local community <code>p</code> using <code>count</code> and <code>mutate</code>. Then create a barplot using <code>geom_bar</code>.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="part-2---confidence-intervals.html#cb22-1" aria-hidden="true" tabindex="-1"></a>us_adults <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="part-2---confidence-intervals.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(climate_change_affects) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="part-2---confidence-intervals.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p =</span> n <span class="sc">/</span><span class="fu">sum</span>(n))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   climate_change_affects     n     p
##   &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
## 1 No                     38000  0.38
## 2 Yes                    62000  0.62</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="part-2---confidence-intervals.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(us_adults, <span class="fu">aes</span>(<span class="at">x =</span> climate_change_affects)) <span class="sc">+</span> </span>
<span id="cb24-2"><a href="part-2---confidence-intervals.html#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb24-3"><a href="part-2---confidence-intervals.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb24-4"><a href="part-2---confidence-intervals.html#cb24-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb24-5"><a href="part-2---confidence-intervals.html#cb24-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Do you think climate change is affecting your local community?&quot;</span> ) <span class="sc">+</span></span>
<span id="cb24-6"><a href="part-2---confidence-intervals.html#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="main_files/figure-html/ex6_solution-1.png" width="672" /></p>
</div>
<p>We'll start with a simple random sample of size 60 from the population.</p>
<p><br></p>
</div>
<div id="exercise-7" class="section level3 unnumbered hasAnchor">
<h3>Exercise 7<a href="part-2---confidence-intervals.html#exercise-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create a sample of size 60 from the data and compute the percent of the adults in the sample think climate change affects their local community?</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>Think about using code from earlier in the lab. Use <code>sample_n()</code> to draw a sample of size 60 and then calculate <code>p_hat</code> using <code>count</code> and <code>mutate</code>.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="part-2---confidence-intervals.html#cb25-1" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> us_adults <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="part-2---confidence-intervals.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="dv">60</span>)</span>
<span id="cb25-3"><a href="part-2---confidence-intervals.html#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="part-2---confidence-intervals.html#cb25-4" aria-hidden="true" tabindex="-1"></a>sample <span class="sc">%&gt;%</span> </span>
<span id="cb25-5"><a href="part-2---confidence-intervals.html#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(climate_change_affects) <span class="sc">%&gt;%</span> </span>
<span id="cb25-6"><a href="part-2---confidence-intervals.html#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p_hat =</span> n <span class="sc">/</span><span class="fu">sum</span>(n))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   climate_change_affects     n p_hat
##   &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
## 1 No                        23 0.383
## 2 Yes                       37 0.617</code></pre>
</div>
<p><br></p>
<strong>What would you expect another student's proportion to be?</strong>
<div id="radio_SVURURURZX" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SVURURURZX" value=""></input> <span>Identical</span></label><label><input type="radio" autocomplete="off" name="radio_SVURURURZX" value=""></input> <span>Very different</span></label><label><input type="radio" autocomplete="off" name="radio_SVURURURZX" value="answer"></input> <span>Slightly similar</span></label>
</div>
<div class="webex-solution">
<button>
Hint
</button>
<p>Think about multiple samples taken from the same population, refer to materials in OpenLearn Section 5.2 to help.</p>
</div>
<p><br></p>
</div>
</div>
<div id="computing-confidence-intervals" class="section level2 unnumbered hasAnchor">
<h2>Computing Confidence Intervals<a href="part-2---confidence-intervals.html#computing-confidence-intervals" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Returning to the motivation for this lab: based on this sample, what can you infer about the population? With just one sample, the best estimate of the proportion of US adults who think climate change affects their local community would be the sample proportion, usually denoted as <span class="math inline">\(\hat{p}\)</span> (here we are calling it <code>p_hat</code>). That serves as a good <strong>point estimate</strong>, but it would be useful to also communicate how uncertain we are of that estimate. This uncertainty can be quantified using a <strong>confidence interval</strong>, which is an example of an <strong>interval estimate</strong>. See Section 5.2 Page 181-183 <a href="https://www.openintro.org/redirect.php?go=os4_tablet&referrer=/stat/os4.php#page=181" target="_blank">OpenIntro Page 181</a></p>
<p>Remembering that the <strong>standard error (SE)</strong> of a point estimate is the same as the standard deviation of the point estimate, we calculate a 95% confidence interval for a sample proportion by adding and subtracting 1.96 <span class="math inline">\(\times\)</span> <strong>standard error (SE)</strong> to the point estimate.</p>
<p><span class="math display">\[ \hat{p} \pm 1.96 * SE \]</span></p>
<p>Or simply in R using:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="part-2---confidence-intervals.html#cb27-1" aria-hidden="true" tabindex="-1"></a>se <span class="ot">&lt;-</span> <span class="fu">sd</span>(sample) <span class="sc">/</span> <span class="fu">sqrt</span>(n)</span>
<span id="cb27-2"><a href="part-2---confidence-intervals.html#cb27-2" aria-hidden="true" tabindex="-1"></a>lower <span class="ot">&lt;-</span> p_hat <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> SE</span>
<span id="cb27-3"><a href="part-2---confidence-intervals.html#cb27-3" aria-hidden="true" tabindex="-1"></a>upper <span class="ot">&lt;-</span> p_hat <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> SE</span>
<span id="cb27-4"><a href="part-2---confidence-intervals.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(lower, upper) </span></code></pre></div>
<p>This is an important inference that we've just made: even though we don't know what the full population looks like, we're 95% confident that the true population proportion lies between the lower and upper values.</p>
<p>However, some conditions need to be made for the confidence interval to be valid.</p>
<p><br></p>
<strong>What conditions must be met for this confidence to be valid?</strong>
<div id="radio_UDUJAKWWJR" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_UDUJAKWWJR" value=""></input> <span>Data comes from a binomial distribution</span></label><label><input type="radio" autocomplete="off" name="radio_UDUJAKWWJR" value="answer"></input> <span>Independence assumption is valid</span></label><label><input type="radio" autocomplete="off" name="radio_UDUJAKWWJR" value=""></input> <span>The distribution is skewed but it is allowed with a small sample size</span></label>
</div>
<div id="radio_SMIVSFHKRQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SMIVSFHKRQ" value="answer"></input> <span>Data comes from a normal distribution</span></label>
</div>
<div id="radio_UXTOGMOIVT" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_UXTOGMOIVT" value="answer"></input> <span>The disribution is skewed but it is allowed with a large sample size</span></label>
</div>
<div class="webex-solution">
<button>
Hint
</button>
<p>Think about the conditions the Central Limit Theorem needs to allow the interval to be computed as seen in OpenLearn Section 5.2.</p>
</div>
<p><br></p>
</div>
<div id="confidence-levels" class="section level2 unnumbered hasAnchor">
<h2>Confidence Levels<a href="part-2---confidence-intervals.html#confidence-levels" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the last section, we used the phrase "95% confident" - but what does this mean?</p>
<p>In this case we have the luxury of knowing the true population proportion since we constructed the data on the entire population.</p>
<p>Run the following code to create a confidence interval from a sample of size 60.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="part-2---confidence-intervals.html#cb28-1" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> us_adults <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="part-2---confidence-intervals.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="dv">60</span>)</span>
<span id="cb28-3"><a href="part-2---confidence-intervals.html#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="part-2---confidence-intervals.html#cb28-4" aria-hidden="true" tabindex="-1"></a>sample_pro <span class="ot">&lt;-</span> <span class="fu">proportions</span>(<span class="fu">table</span>(sample))</span>
<span id="cb28-5"><a href="part-2---confidence-intervals.html#cb28-5" aria-hidden="true" tabindex="-1"></a>sample_pro <span class="ot">&lt;-</span> sample_pro[<span class="dv">2</span>]</span>
<span id="cb28-6"><a href="part-2---confidence-intervals.html#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="part-2---confidence-intervals.html#cb28-7" aria-hidden="true" tabindex="-1"></a>sample_se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(sample_pro <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> sample_pro) <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb28-8"><a href="part-2---confidence-intervals.html#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="part-2---confidence-intervals.html#cb28-9" aria-hidden="true" tabindex="-1"></a>lower_vector <span class="ot">&lt;-</span> sample_pro <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> sample_se <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">60</span>) </span>
<span id="cb28-10"><a href="part-2---confidence-intervals.html#cb28-10" aria-hidden="true" tabindex="-1"></a>upper_vector <span class="ot">&lt;-</span> sample_pro <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> sample_se <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">60</span>)</span>
<span id="cb28-11"><a href="part-2---confidence-intervals.html#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="part-2---confidence-intervals.html#cb28-12" aria-hidden="true" tabindex="-1"></a>ci <span class="ot">&lt;-</span> <span class="fu">c</span>(lower_vector, upper_vector)</span>
<span id="cb28-13"><a href="part-2---confidence-intervals.html#cb28-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-14"><a href="part-2---confidence-intervals.html#cb28-14" aria-hidden="true" tabindex="-1"></a>ci</span></code></pre></div>
<p><br></p>
<strong>If you were to repeat this simulation again and again, would each confidence interval capture the true population proportion of US adults who think climate change affects their local community?</strong>
<div id="radio_ODCIATDSJD" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ODCIATDSJD" value=""></input> <span>No, each certainly wouldn't</span></label><label><input type="radio" autocomplete="off" name="radio_ODCIATDSJD" value=""></input> <span>Yes, each certainly would</span></label><label><input type="radio" autocomplete="off" name="radio_ODCIATDSJD" value="answer"></input> <span>Each would with 95% confidence</span></label>
</div>
<div class="webex-solution">
<button>
Hint
</button>
<p>Think about what the interval is estimating and with what level of confidence.</p>
</div>
<p><br></p>
<p>If we were to collect all the confidence intervals produced in the console above by all the students in S1Y, each student should have produced a slightly different confidence interval because they were each based on different random samples.</p>
<p><br></p>
<strong>What proportion of those intervals would you expect to capture the true population mean?</strong>
<div id="radio_JNBDSAAAJD" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_JNBDSAAAJD" value="answer"></input> <span>95%</span></label><label><input type="radio" autocomplete="off" name="radio_JNBDSAAAJD" value=""></input> <span>5%</span></label><label><input type="radio" autocomplete="off" name="radio_JNBDSAAAJD" value=""></input> <span>2.5%</span></label>
</div>
<div class="webex-solution">
<button>
Hint
</button>
<p>Think about what repeatedly sampling would do to the interval and the confidence it produces.</p>
</div>
<p><br></p>
<p>We will now collect many samples to learn more about how sample proportions and confidence intervals constructed based on those samples vary from one sample to another. This will be done by:</p>
<ol style="list-style-type: decimal">
<li>Obtain a random sample.</li>
<li>Calculate the sample proportion, and use these to calculate and store the lower and upper bounds of the confidence intervals.</li>
<li>Repeat these steps for a large number of times.</li>
</ol>
<p><br></p>
<div id="exercise-8" class="section level3 unnumbered hasAnchor">
<h3>Exercise 8<a href="part-2---confidence-intervals.html#exercise-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Run the code below and change the sample size and confidence level. This will show the effect these factors have on the confidence intervals. When running this code consider the true population proportion and if the intervals contain this value.</p>
<p><strong>Note</strong> The confidence level we have been using is 95% which refers to 1.96 within the code. This is used as 95% of the area of a normal distribution is within 1.96 standard deviations of the mean, as seen on <a href="https://www.openintro.org/redirect.php?go=os4_tablet&referrer=/stat/os4.php#page=183">OpenIntro Page 183</a>. Other confidence levels can be used but commonly: 99% uses <span class="math inline">\(\pm\)</span> 2.58, 97% uses <span class="math inline">\(\pm\)</span> 2.17, 95% uses <span class="math inline">\(\pm\)</span> 1.96, 90% uses <span class="math inline">\(\pm\)</span> 1.64, 75% uses <span class="math inline">\(\pm\)</span> 0.67.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="part-2---confidence-intervals.html#cb29-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">60</span></span>
<span id="cb29-2"><a href="part-2---confidence-intervals.html#cb29-2" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> us_adults <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="part-2---confidence-intervals.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(n)</span>
<span id="cb29-4"><a href="part-2---confidence-intervals.html#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="part-2---confidence-intervals.html#cb29-5" aria-hidden="true" tabindex="-1"></a>sample_pro <span class="ot">&lt;-</span> <span class="fu">proportions</span>(<span class="fu">table</span>(sample))</span>
<span id="cb29-6"><a href="part-2---confidence-intervals.html#cb29-6" aria-hidden="true" tabindex="-1"></a>sample_pro <span class="ot">&lt;-</span> sample_pro[<span class="dv">2</span>]</span>
<span id="cb29-7"><a href="part-2---confidence-intervals.html#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="part-2---confidence-intervals.html#cb29-8" aria-hidden="true" tabindex="-1"></a>sample_se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(sample_pro <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> sample_pro) <span class="sc">/</span> n)</span>
<span id="cb29-9"><a href="part-2---confidence-intervals.html#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="part-2---confidence-intervals.html#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co">#90% Confidence Level</span></span>
<span id="cb29-11"><a href="part-2---confidence-intervals.html#cb29-11" aria-hidden="true" tabindex="-1"></a>lower_vector <span class="ot">&lt;-</span> sample_pro <span class="sc">-</span> <span class="fl">1.64</span><span class="sc">*</span> sample_se <span class="sc">/</span> <span class="fu">sqrt</span>(n) </span>
<span id="cb29-12"><a href="part-2---confidence-intervals.html#cb29-12" aria-hidden="true" tabindex="-1"></a>upper_vector <span class="ot">&lt;-</span> sample_pro <span class="sc">+</span> <span class="fl">1.64</span> <span class="sc">*</span> sample_se <span class="sc">/</span> <span class="fu">sqrt</span>(n)</span>
<span id="cb29-13"><a href="part-2---confidence-intervals.html#cb29-13" aria-hidden="true" tabindex="-1"></a>ci <span class="ot">&lt;-</span> <span class="fu">c</span>(lower_vector, upper_vector)</span>
<span id="cb29-14"><a href="part-2---confidence-intervals.html#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;90% CI&quot;</span>, <span class="fu">paste</span>(<span class="fu">round</span>(ci,<span class="dv">3</span>)))</span>
<span id="cb29-15"><a href="part-2---confidence-intervals.html#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="part-2---confidence-intervals.html#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="co">#95% Confidence Level</span></span>
<span id="cb29-17"><a href="part-2---confidence-intervals.html#cb29-17" aria-hidden="true" tabindex="-1"></a>lower_vector <span class="ot">&lt;-</span> sample_pro <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> sample_se <span class="sc">/</span> <span class="fu">sqrt</span>(n) </span>
<span id="cb29-18"><a href="part-2---confidence-intervals.html#cb29-18" aria-hidden="true" tabindex="-1"></a>upper_vector <span class="ot">&lt;-</span> sample_pro <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> sample_se <span class="sc">/</span> <span class="fu">sqrt</span>(n)</span>
<span id="cb29-19"><a href="part-2---confidence-intervals.html#cb29-19" aria-hidden="true" tabindex="-1"></a>ci <span class="ot">&lt;-</span> <span class="fu">c</span>(lower_vector, upper_vector)</span>
<span id="cb29-20"><a href="part-2---confidence-intervals.html#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;95% CI&quot;</span>, <span class="fu">paste</span>(<span class="fu">round</span>(ci,<span class="dv">3</span>)))</span>
<span id="cb29-21"><a href="part-2---confidence-intervals.html#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="part-2---confidence-intervals.html#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="co">#99% Confidence Level</span></span>
<span id="cb29-23"><a href="part-2---confidence-intervals.html#cb29-23" aria-hidden="true" tabindex="-1"></a>lower_vector <span class="ot">&lt;-</span> sample_pro <span class="sc">-</span> <span class="fl">2.58</span> <span class="sc">*</span> sample_se <span class="sc">/</span> <span class="fu">sqrt</span>(n) </span>
<span id="cb29-24"><a href="part-2---confidence-intervals.html#cb29-24" aria-hidden="true" tabindex="-1"></a>upper_vector <span class="ot">&lt;-</span> sample_pro <span class="sc">+</span> <span class="fl">2.58</span> <span class="sc">*</span> sample_se <span class="sc">/</span> <span class="fu">sqrt</span>(n)</span>
<span id="cb29-25"><a href="part-2---confidence-intervals.html#cb29-25" aria-hidden="true" tabindex="-1"></a>ci <span class="ot">&lt;-</span> <span class="fu">c</span>(lower_vector, upper_vector)</span>
<span id="cb29-26"><a href="part-2---confidence-intervals.html#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;99% CI&quot;</span>, <span class="fu">paste</span>(<span class="fu">round</span>(ci,<span class="dv">3</span>)))</span></code></pre></div>
<p><br></p>
<strong>Which interval would you expect to be wider?</strong>
<div id="radio_VAEYKDYVTE" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_VAEYKDYVTE" value=""></input> <span>Interval with a larger sample size</span></label><label><input type="radio" autocomplete="off" name="radio_VAEYKDYVTE" value="answer"></input> <span>Interval with a larger confidence level</span></label>
</div>
<div class="webex-solution">
<button>
Hide
</button>
<p>Increasing the sample size decreases the width of the confidence interval, this is because it decreases the standard error reducing the variability of the interval.</p>
</div>
<p><br></p>

</div>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="part-1---sampling-distributions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="group-tasks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
